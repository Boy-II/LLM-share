# 完整放大與重繪技術棧對比指南

> SUPIR vs SeedVR2 vs ControlNet Union Tile - 針對你的工作流程
> 
> 作者: Boy | 更新日期: 2025-11-11

---

## 你的技術棧概覽

### 當前工具分工

```
放大 & 清晰化:
  ├─ SUPIR (影像超解析度)
  ├─ SeedVR2 (影片/影像放大)
  └─ [備選] Tile 放大

重繪 & 修復:
  └─ ControlNet Union SDXL (局部重繪、修復)

五官精修:
  └─ FaceDetailer
```

---

## 技術深度對比

### 核心差異表

| 特性 | SUPIR | SeedVR2 | ControlNet Union Tile |
|------|-------|---------|----------------------|
| **類型** | 擴散模型超解析度 | 一步擴散轉換器 | ControlNet 引導重繪 |
| **架構** | SDXL + 自定義 VAE | Diffusion Transformer | SDXL ControlNet |
| **主要用途** | 照片級放大修復 | 影片/影像去模糊 | 保持構圖的細節增強 |
| **速度** | 慢 (25-45 steps) | 快 (1 step!) | 中等 (20-30 steps) |
| **VRAM** | 高 (12-16GB) | 超高 (18-24GB) | 中等 (10-12GB) |
| **品質** | 極致 9.5/10 | 極致 9.5/10 | 優秀 9/10 |
| **提示詞控制** | ✅ 強 | ❌ 無 | ✅ 強 |
| **構圖保持** | ⚠️ 可能改變 | ✅ 完美保持 | ✅ 強制保持 |
| **去模糊能力** | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ |
| **細節生成** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ |
| **時序一致性** | ❌ 無 | ✅ 影片專用 | ❌ 無 |

---

## SUPIR 深度解析

### 技術原理

SUPIR (Scaling Up to Excellence) 是基於 SDXL 的照片級影像修復模型,使用特殊的 "denoise encoder" VAE 進行兩階段處理。

```
SUPIR 工作流程:

階段 1: Denoise Encoding (可選)
  低品質圖像 → SUPIR VAE Encoder → 去噪 Latent
  
階段 2: SDXL Diffusion 放大
  Latent → SDXL (+ SUPIR 控制) → 高品質 Latent
  
階段 3: 解碼
  高品質 Latent → VAE Decoder → 最終圖像
```

### SUPIR 核心優勢

#### 1. 照片級修復 ⭐⭐⭐⭐⭐

SUPIR 使用大量高品質訓練數據(超過 1000 萬張圖像),並採用類似 DALL-E 3 的 Re-captioning 技術

```
適合場景:
  ✅ 老照片修復
  ✅ 低解析度相片放大
  ✅ 噪點嚴重的圖像
  ✅ JPEG 壓縮瑕疵修復
  ✅ 真實感要求極高的作品
```

#### 2. 提示詞引導 ⭐⭐⭐⭐⭐

```
SUPIR 獨特優勢: 可以用提示詞引導細節生成

正面提示詞範例:
  "high quality, detailed, sharp focus, 
   professional photography, detailed textures,
   clear facial features"

負面提示詞範例:
  "blurry, low quality, artifacts, noise,
   jpeg compression, pixelated, soft focus"

效果:
  • 細節方向可控
  • 風格可以調整
  • 瑕疵針對性去除
```

#### 3. 兩種模型變體

SUPIR-v0Q 適合高度通用和高品質場景,而 SUPIR-v0F 針對輕度降質保留更多細節

```
SUPIR-v0Q (推薦):
  • 預設訓練設定
  • 高通用性
  • 高圖像品質
  • 適合大多數情況
  
SUPIR-v0F:
  • 輕度降質優化
  • 保留更多原始細節
  • 適合已經不錯但需微調的圖像
```

### SUPIR 關鍵參數

SUPIR 的核心參數包括 scale_by (放大比例)、steps (EDM 採樣步數)、cfg_scale (提示詞引導強度)、以及 s_churn 和 s_noise 控制 EDM 噪音模型

```
[SUPIR_model_loader_v2]
  model: SUPIR-v0Q_fp16.safetensors
  fp8_unet: True (降低 VRAM)
  high_vram: False (你的 16GB 不需要)

[SUPIR_encode]
  use_tiled_vae: True
  tile_size: 512

[SUPIR_sample]
  steps: 25-45
    • 25: 快速,品質良好
    • 35: 平衡推薦 ⭐
    • 45: 最高品質
  
  cfg_scale: 7-8
    • 7: 自然
    • 8: 提示詞影響更強
  
  scale_by: 2-4x
    • 2x: 標準放大
    • 3x: 較大放大
    • 4x: 極限(可能需分階段)
  
  s_churn: 5 (預設,控制紋理)
  s_noise: 1.003 (預設,控制噪點)

[SUPIR_decode]
  use_tiled_vae: True
  tile_size: 512
```

### SUPIR 實戰工作流程

#### 標準放大流程

```
[Load Image] 1248x1824
    ↓
[SUPIR_model_loader_v2]
  SUPIR-v0Q_fp16
  SDXL: juggernautXL_v9
  fp8_unet: True
    ↓
[SUPIR_first_stage] (可選預處理)
    ↓
[SUPIR_encode]
  use_tiled_vae: True
    ↓
[SUPIR_conditioner]
  positive: "high quality, detailed, sharp"
  negative: "blurry, low quality, artifacts"
    ↓
[SUPIR_sample]
  steps: 35
  cfg_scale: 7.5
  scale_by: 2x
    ↓
[SUPIR_decode] → 2496x3648
    ↓
[FaceDetailer] (五官精修)
    ↓
[Save Image]

時間: ~120-150秒
VRAM: ~14GB
品質: 照片級 9.5/10
```

### SUPIR 的限制

```
❌ 不適合:
  1. 需要快速生成 (太慢)
  2. 極低 VRAM (<10GB)
  3. 影片處理 (無時序一致性)
  4. 二次元風格 (訓練偏真實攝影)
  
⚠️ 注意:
  1. 可能改變構圖 (如果 cfg_scale 太高)
  2. 有時候過度銳化
  3. 對 AI 生成圖可能過度處理
```

---

## SeedVR2 深度解析

### 革命性技術

SeedVR2 是 ByteDance 開發的一步擴散視頻修復模型,使用 Diffusion Adversarial Post-Training (APT) 技術,在單步內完成傳統需要 15-50 步的修復工作

```
技術突破:

傳統擴散模型:
  低品質 → 15-50 steps → 高品質
  時間: ~2-5 分鐘
  
SeedVR2:
  低品質 → 1 step → 高品質
  時間: ~10-20 秒
  
速度提升: 4-10x!
```

### SeedVR2 核心優勢

#### 1. 極致去模糊 ⭐⭐⭐⭐⭐

SeedVR2 在去模糊方面表現卓越,被稱為對 Keep、PMRF 等專業工具的"跨維度碾壓"

```
去模糊能力排名:
  1. SeedVR2        ⭐⭐⭐⭐⭐
  2. SUPIR          ⭐⭐⭐⭐
  3. Union Tile     ⭐⭐⭐
  4. 傳統 Upscaler  ⭐
  
最適合:
  • 運動模糊影片
  • 失焦圖像
  • 壓縮瑕疵嚴重
  • 低品質監控畫面
```

#### 2. 影片時序一致性 ⭐⭐⭐⭐⭐

SeedVR2 需要至少 batch_size 為 5 才能啟動時序一致性計算,batch_size 越高效果越好但需要更多 VRAM

```
影片處理優勢:

傳統逐幀處理:
  Frame 1 → 處理 → ✓
  Frame 2 → 處理 → ✓ (可能閃爍)
  Frame 3 → 處理 → ✓ (可能閃爍)
  
SeedVR2 時序處理:
  Frame 1-5 → 同時處理 → ✓✓✓✓✓
    • 考慮前後幀關係
    • 無閃爍
    • 運動平滑
```

#### 3. 兩種模型規模

SeedVR2 提供 3B 和 7B 兩種模型,支援 FP16、FP8 和 GGUF 量化格式

```
SeedVR2-3B:
  VRAM: 16-18GB (FP16)
  VRAM: 12-14GB (FP8)
  VRAM: 8-10GB (GGUF Q4)
  品質: 9/10
  速度: 快
  
SeedVR2-7B:
  VRAM: 24-26GB (FP16)
  VRAM: 18-20GB (FP8)
  VRAM: 12-14GB (GGUF Q4)
  品質: 9.5/10
  速度: 較慢
  
7B Sharp 變體:
  更銳利的輸出
  適合需要高清晰度場景
```

### SeedVR2 關鍵參數

SeedVR2 的主要參數包括 batch_size (幀批次大小)、resolution (目標解析度)、以及模型選擇

```
[SeedVR2 Load DiT Model]
  model: seedvr2_ema_3b_fp16.safetensors
    • 3B FP16: 最高品質,需 18GB
    • 3B FP8: 平衡,需 14GB ⭐ 推薦
    • 7B FP16: 極致品質,需 26GB
    • 7B Sharp: 銳化版本
  
  device: cuda:0
  offload_device: cpu (低 VRAM 時)

[SeedVR2 Load VAE Model]
  model: ema_vae_fp16.safetensors
  device: cuda:0

[SeedVR2 Video Upscaler]
  batch_size: 5-81
    • 1: 僅單幀,無時序 (低 VRAM)
    • 5: 最低時序一致性 ⭐ 最低推薦
    • 9: 良好平衡
    • 27-81: 極致品質,需 >24GB
  
  resolution: 1080-2160
    • 1080: Full HD
    • 1440: 2K
    • 2160: 4K

[BlockSwap Config] (低 VRAM 救星)
  enable_blockswap: True
  blocks_to_swap: 16 (3B) / 18 (7B)
  offload_device: cpu
  
  效果: VRAM 降低 40-50%!
  代價: 速度降低 ~20%
```

### SeedVR2 實戰工作流程

#### 影片放大流程

```
[Load Video] 或 [Load Video Frames]
    ↓
[SeedVR2 Torch Compile Settings]
  mode: max-autotune
  backend: inductor
    ↓
[SeedVR2 Load DiT Model]
  model: seedvr2_ema_3b_fp8
  device: cuda:0
    ↓
[SeedVR2 Load VAE Model]
  model: ema_vae_fp16
    ↓
[SeedVR2 BlockSwap Config] (可選,低 VRAM)
  enable: True
  blocks_to_swap: 16
    ↓
[SeedVR2 Video Upscaler]
  batch_size: 9 (你的 16GB 可用)
  resolution: 1080
    ↓
[Save Video/Frames]

時間 (30秒影片):
  • 無 BlockSwap: ~45秒
  • 有 BlockSwap: ~60秒

VRAM:
  • 無 BlockSwap: ~16GB
  • 有 BlockSwap: ~10GB ⭐
```

#### 單幀圖像放大

```
[Load Image] 1248x1824
    ↓
[SeedVR2 設定] (同上)
    ↓
[SeedVR2 Video Upscaler]
  batch_size: 1 (單幀模式)
  resolution: 1824 (寬度)
    ↓
結果: 去模糊 + 放大 2x
    ↓
[FaceDetailer] (可選)
    ↓
[Save Image]

時間: ~15秒 (超快!)
品質: 去模糊極強 9.5/10
```

### SeedVR2 特殊技巧

#### 1. 分階段放大避免過銳

SeedVR2 可能過度銳化,特別是對 AI 生成內容,建議通過分階段放大控制銳化程度

```
問題: SeedVR2 一次 4x 放大可能過銳

解決: 分兩次 2x 放大

階段 1:
  1024x1024 → SeedVR2 2x → 2048x2048
  
階段 2:
  2048x2048 → SeedVR2 2x → 4096x4096
  
優勢:
  • 銳化更自然
  • 細節更平衡
  • 避免"塑膠感"
```

#### 2. BlockSwap 低 VRAM 運行

BlockSwap 技術由 AInVFX 開發,通過將 Transformer 塊動態在 CPU/GPU 間交換,可降低 VRAM 需求 40-50%

```
BlockSwap 原理:

傳統:
  • 所有 32 個 block 都在 VRAM
  • VRAM: 18GB
  
BlockSwap:
  • 只有當前處理的 block 在 VRAM
  • 其他 block 在 CPU RAM
  • VRAM: 10GB ✅
  
設定:
  blocks_to_swap: 16
    • 數字越大,VRAM 越低
    • 但速度越慢
    • 16 是平衡點
```

### SeedVR2 的限制

```
❌ 不適合:
  1. 需要提示詞控制細節
  2. 需要改變構圖
  3. 低 VRAM (<10GB,即使有 BlockSwap)
  4. 對延遲敏感的實時應用
  
⚠️ 注意:
  1. VRAM 需求極高 (即使 3B 也要 16GB+)
  2. 可能過度銳化 AI 生成內容
  3. 7B FP8 模型品質有問題 (用 FP16)
  4. 一步生成,無法中途調整
```

---

## ControlNet Union Tile 深度對比

### 在你的工作流程中的定位

```
你的使用方式: 重繪修復

ControlNet Union Tile 擅長:
  ✅ 保持構圖的細節增強
  ✅ Img2Img 高 denoise 但不改變構圖
  ✅ 局部重繪 (Inpainting)
  ✅ 修復特定區域
  ✅ 提示詞精確控制
  
SUPIR/SeedVR2 擅長:
  ✅ 整體放大
  ✅ 去模糊
  ✅ 超解析度
  ✅ 照片級修復
```

### Union Tile 獨特優勢

#### 1. 提示詞精確控制

```
場景: 放大後某個區域不滿意

Union Tile 流程:
  原圖 → Upscale 2x
    ↓
  遮罩問題區域
    ↓
  Union Tile Inpainting
    control_type: "inpainting"
    strength: 0.7
    
  Prompt: 描述想要的效果
    "detailed victorian dress with lace patterns"
    
  結果: 只重繪該區域,其他完美保留

SUPIR/SeedVR2 做不到:
  • 無法局部控制
  • 沒有提示詞引導
  • 只能整體處理
```

#### 2. 風格一致性

```
因為使用 Illustrious + Union (同為 SDXL):
  • 風格完全統一
  • LoRA 可以繼續使用
  • 角色特徵保持
  
SUPIR:
  • 偏向真實攝影風格
  • 可能改變二次元風格
  
SeedVR2:
  • 通用修復,無風格控制
```

#### 3. 多控制組合

```
Union 獨特能力: 多控制疊加

範例:
  Tile (細節增強) + Openpose (姿勢微調)
    ↓
  一次處理完成
    ↓
  細節好 + 姿勢也優化了

SUPIR/SeedVR2:
  • 單一功能
  • 無法組合
```

---

## 三者組合的最佳實踐

### 工作流程決策樹

```
收到/生成一張圖像
    ↓
    需要做什麼?
    ↓
┌───┴───────────────────────────────────┐
│                                       │
放大 & 清晰化                     重繪 & 修復
│                                       │
├─ 圖像模糊嚴重?                  ├─ 需要局部修改?
│  YES → SeedVR2 ⭐                │  YES → Union Inpainting ⭐
│  NO  → 下一步                    │  NO  → 下一步
│                                  │
├─ 需要照片級真實感?               ├─ 需要提示詞控制?
│  YES → SUPIR ⭐                  │  YES → Union Tile ⭐
│  NO  → 下一步                    │  NO  → 下一步
│                                  │
├─ 需要提示詞引導細節?             └─ 整體細節不足?
│  YES → SUPIR ⭐                      → Union Tile ⭐
│  NO  → SeedVR2 ⭐
│
└─ 是影片?
   YES → SeedVR2 ⭐ (唯一選擇)
   NO  → 根據上述判斷
```

### 完整組合工作流程

#### 方案 1: SUPIR + Union Tile + FaceDetailer (極致品質)

```
用途: 精品圖,追求照片級真實感

階段 1: Illustrious Base 生成
  832x1216 → Latent 1.5x → 1248x1824
  Regional Prompts 控制多角色
  
階段 2: SUPIR 照片級放大
  1248x1824 → SUPIR 2x → 2496x3648
  Prompt: "high quality, detailed, photorealistic"
  Steps: 35, CFG: 7.5
  
階段 3: Union Tile 細節修復
  發現某些區域 (如服裝) 不滿意
  → Union Tile Inpainting
  → 重繪特定區域
  
階段 4: FaceDetailer 五官精修
  → FaceDetailer × N (多人)
  → 極致五官細節

總時間: ~4-5 分鐘
VRAM 峰值: ~16GB
品質: 商業級 10/10
```

#### 方案 2: SeedVR2 + FaceDetailer (效率優先)

```
用途: 快速去模糊 + 放大

階段 1: Illustrious Base 生成
  1248x1824 (略模糊或需要銳化)
  
階段 2: SeedVR2 去模糊放大
  1248x1824 → SeedVR2 2x → 2496x3648
  batch_size: 1 (單幀)
  resolution: 2496
  使用 BlockSwap (VRAM 優化)
  
階段 3: FaceDetailer 五官精修
  → FaceDetailer × N

總時間: ~90秒
VRAM: ~12GB (BlockSwap)
品質: 9/10,極快!
```

#### 方案 3: Union Tile + FaceDetailer (標準流程)

```
用途: 日常工作流程,你目前使用

階段 1: Illustrious Base 生成
  832x1216 → Latent 1.5x → 1248x1824
  
階段 2: Union Tile 細節增強
  1248x1824 → Upscale 2x → 2496x3648
  → Union Tile (strength 0.5, denoise 0.5)
  → 細節增強,構圖保持
  
階段 3: FaceDetailer 五官精修
  → FaceDetailer × N

總時間: ~100秒
VRAM: ~12GB
品質: 9/10,平衡最佳 ⭐
```

#### 方案 4: 三者聯合 (終極方案)

```
用途: 絕對精品,不計時間成本

Base (Illustrious)
    ↓
SeedVR2 去模糊 (如果需要)
    ↓
SUPIR 照片級放大 2x
    ↓
Union Tile 局部重繪 (修復瑕疵)
    ↓
FaceDetailer 五官精修
    ↓
SeedVR2 最終銳化 (輕度,可選)
    ↓
最終圖像

總時間: ~6-8 分鐘
品質: 無與倫比 10/10
適合: 商業作品、展示、印刷
```

---

## 針對你的建議

### 當前工作流程分析

```
你目前使用:
  • SUPIR: 放大 & 清晰化 ✅
  • SeedVR2: 放大 & 清晰化 ✅
  • Union: 重繪修復 ✅
  • FaceDetailer: 五官精修 ✅
  
這個配置非常完整!
```

### 優化建議

#### 1. 根據場景選擇工具

```
快速判斷:
  • 模糊圖 → SeedVR2 (去模糊最強)
  • 需要真實感 → SUPIR (照片級)
  • 需要提示詞控制 → Union Tile
  • 影片 → SeedVR2 (唯一選擇)
```

#### 2. VRAM 優化策略

```
你的 RTX 5080 16GB:

SUPIR:
  • 使用 fp8_unet: True
  • use_tiled_vae: True
  • VRAM: ~14GB ✅
  
SeedVR2:
  • 使用 3B FP8 模型
  • 啟用 BlockSwap
  • blocks_to_swap: 16
  • VRAM: ~12GB ✅
  
Union Tile:
  • 標準設定即可
  • VRAM: ~11GB ✅
  
結論: 你的 16GB 可以跑所有工具!
```

#### 3. 工作流程模板

```
日常使用 (80%):
  Base → Union Tile 2x → FaceDetailer
  時間: ~100秒
  品質: 9/10 ⭐
  
模糊修復 (10%):
  Base → SeedVR2 2x → FaceDetailer
  時間: ~90秒
  品質: 去模糊 9.5/10
  
極致精品 (10%):
  Base → SUPIR 2x → Union Tile 修復 → FaceDetailer
  時間: ~4-5分鐘
  品質: 10/10
```

#### 4. 影片處理專用

```
影片放大流程:
  [Load Video Frames]
      ↓
  [SeedVR2 Video Upscaler]
    batch_size: 9
    resolution: 1080
    enable BlockSwap
      ↓
  [Save Video]

時間 (30秒影片): ~60秒
品質: 極致,無閃爍
```

---

## 常見問題

### Q1: SUPIR 和 SeedVR2 哪個更好?

```
A: 看需求,各有擅長

SUPIR 更好的場景:
  • 需要提示詞控制細節
  • 照片級真實感要求
  • 靜態圖像放大
  • 願意等待 2-3 分鐘
  
SeedVR2 更好的場景:
  • 模糊嚴重需要去模糊
  • 影片處理 (唯一選擇)
  • 追求速度 (1 step!)
  • 不需要提示詞控制
  
結論: 兩者互補,都保留!
```

### Q2: 為什麼還需要 Union Tile?

```
A: Union Tile 解決 SUPIR/SeedVR2 做不到的事

Union 獨特能力:
  1. 局部重繪 (Inpainting)
  2. 提示詞精確控制
  3. 與 Illustrious 風格統一
  4. 多控制組合
  5. 保持二次元風格
  
SUPIR/SeedVR2:
  • 整體處理
  • 偏向真實感
  • 無法局部控制
```

### Q3: 三者可以串聯使用嗎?

```
A: 可以!而且效果極佳

推薦組合:
  1. SeedVR2 去模糊
     ↓
  2. SUPIR 照片級放大
     ↓
  3. Union Tile 局部修復
     ↓
  4. FaceDetailer 五官精修
  
結果: 完美無瑕的極致作品
時間: ~5-6 分鐘
```

### Q4: 哪個最省 VRAM?

```
A: 都能在你的 16GB 上運行,但各有優化

VRAM 排序 (優化後):
  1. Union Tile: ~11GB ⭐ 最低
  2. SeedVR2 (BlockSwap): ~12GB
  3. SUPIR (fp8 + tiled): ~14GB
  
結論: 都可以用,但注意:
  • SeedVR2 需要 BlockSwap
  • SUPIR 需要 fp8_unet + tiled_vae
```

---

## 總結

### 你的完美工具棧

```
✅ SUPIR
  用途: 照片級真實感放大
  場景: 老照片、真實攝影作品
  優勢: 提示詞控制、極致品質
  
✅ SeedVR2
  用途: 極速去模糊、影片處理
  場景: 模糊圖修復、影片放大
  優勢: 最強去模糊、時序一致
  
✅ ControlNet Union Tile
  用途: 保持構圖的重繪修復
  場景: 局部修改、風格保持
  優勢: 提示詞控制、與 Illustrious 完美配合
  
✅ FaceDetailer
  用途: 五官極致精修
  場景: 所有流程的最後一步
  優勢: 專注臉部,效果最佳
```

### 推薦工作流程

```
標準流程 (80% 使用):
  Base → Union Tile 2x → FaceDetailer
  
去模糊專用 (10% 使用):
  Base → SeedVR2 2x → FaceDetailer
  
極致精品 (10% 使用):
  Base → SUPIR 2x → Union Tile 修復 → FaceDetailer
  
影片處理 (100% 使用):
  Video → SeedVR2 → 完成
```

---

**你的工具棧已經是最完整、最強大的組合!根據不同場景靈活選用,發揮各自優勢,就能達到極致效果!** 🎉