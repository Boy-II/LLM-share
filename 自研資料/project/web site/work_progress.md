# 工作進度紀錄 (Work Progress)

> **更新日期**: 2025-11-20
> **專案定位**: EDM/廣告式 One Page 快速生成器

---

## 📍 當前狀態快照

### 專案階段
- **當前階段**: 階段 1.5 - 資產庫重新設計
- **階段狀態**: 進行中
- **完成度**: 15%

### 當前任務
- **任務描述**: 根據核心理解轉變，重新設計整個架構和資產庫
- **核心轉變**: 從「LLM 自由創作」轉為「LLM 標籤生成 + 後端正則替換」
- **下一步行動**: 更新所有資產庫文件為新格式

---

## 🎯 專案核心定位（重大更新）

### 專案本質
**快速高效的 EDM/廣告式 One Page 生成器**
- 類似 Mailchimp、Unbounce 的 Landing Page 生成器
- 重點：第一屏（Hero Section）設計
- 其餘內容：固定範本選擇和組合

### 核心架構
```
使用者表單 → LLM 生成標籤 → 後端正則替換 → 完整 HTML
```

**Token 消耗極低**：LLM 只產生輕量標籤，不讀取資產庫

---

## 🏗️ 架構關鍵理解

### ✅ 正確理解
1. **使用者只能選擇既有範本**（封閉式選擇，不存在「範本找不到」問題）
2. **LLM 角色**：將表單資料轉換為標籤清單（極輕量）
3. **後端引擎**：用正則表達式替換標籤為實際 HTML/CSS
4. **第一屏最重要**：80% 精力投入 Hero Section 設計
5. **其餘皆由模版組成**：內容區塊全部從固定範本選擇

### ❌ 之前的誤解
1. ~~LLM 需要讀取多個資產文件~~
2. ~~LLM 需要組合 HTML/CSS~~
3. ~~需要處理「範本找不到」的情況~~
4. ~~需要動態創作新範本~~

---

## 📚 資產庫狀態

### HTML 範本 (template_samples.md)
- **狀態**: 🔄 重寫中（改為標籤→HTML 映射格式）
- **版本**: v2.0（全新格式）
- **範本數量（規劃）**:
  - Hero 範本：5 種（重點）
  - 內容區塊：8 種
- **格式變更**: 從「描述」改為「正則表達式 + HTML 模板」

### CSS 配色 (color_schemes.md)
- **狀態**: 🔄 重寫中
- **版本**: v2.0
- **配色數量**: 6 種固定方案
- **格式**: 完整 CSS 變數定義

### 佈局風格 (layout_styles.md)
- **狀態**: 🆕 待建立
- **版本**: v1.0
- **風格數量**: 3 種（modern / compact / editorial）
- **實作方式**: 透過 CSS 變數控制間距和字體大小

### 前端表單 (generator-form.html)
- **狀態**: 🆕 待建立
- **功能**: 使用者配置介面
- **包含區塊**:
  - 第一屏配置（Hero 選擇、標題、副標題、CTA）
  - 內容區塊多選
  - 配色選擇
  - 佈局風格選擇
  - SEO 資訊

### LLM Prompt 範本
- **狀態**: 🆕 待建立
- **輸入**: 表單 JSON
- **輸出**: 標籤清單（XML/自定義格式）
- **Token 消耗**: 極低（< 500 tokens）

### ~~JavaScript 範本 (js_templates.md)~~
- **狀態**: ❌ 已取消（簡化架構，JS 內嵌於範本中）

### ~~特效庫 (effects_library.md)~~
- **狀態**: ❌ 已取消（整合進範本的 CSS 中）

### ~~簡寫語法 (shorthand_syntax.md)~~
- **狀態**: ❌ 已取消（改用標籤格式）

---

## 💡 關鍵決策紀錄

### 決策 #1: 架構轉型（2025-11-20）
- **內容**: 從「LLM 組裝」改為「LLM 標籤生成 + 後端替換」
- **理由**:
  - 大幅降低 Token 消耗
  - 提高生成速度和可靠性
  - 更易維護和擴展
- **影響**: 所有資產庫需要重新設計

### 決策 #2: 第一屏為重點（2025-11-20）
- **內容**: 80% 設計精力投入第一屏（Hero Section）
- **理由**:
  - 第一屏決定使用者是否繼續瀏覽
  - 承載核心訊息和 CTA
  - EDM/廣告頁的轉換關鍵
- **實作**: 提供 5 種精心設計的 Hero 範本

### 決策 #3: 封閉式範本選擇（2025-11-20）
- **內容**: 使用者只能從固定範本中選擇，不支援自訂範本
- **理由**:
  - 確保品質一致
  - 簡化流程
  - 避免 LLM 創作的不確定性
- **範本總數**: 5 Hero × 8 內容區塊 × 6 配色 × 3 佈局 = 720 種組合

### 決策 #4: 響應式策略（2025-11-20）
- **內容**: 流式佈局 + 兩個斷點（Mobile < 768px, Desktop ≥ 768px）
- **理由**:
  - 符合 EDM/廣告頁需求
  - 簡化開發和維護
- **字體**: Google Fonts
- **深色模式**: 不支援

### 決策 #5: SEO 為必要元素（2025-11-20）
- **內容**: 所有頁面必須包含完整 SEO 配置
- **包含**: Meta 標籤、Open Graph、Twitter Card、JSON-LD
- **實作**: 在表單中加入 SEO 資訊欄位

### 決策 #6: 影片處理策略（2025-11-20）
- **內容**: 使用固定 template，使用者只填 URL
- **限制**: 若無提供 URL，不可使用影片功能
- **降級**: 影片載入失敗時自動切換為圖片背景

---

## 📝 對話歷史記錄

### 2025-11-20 16:XX - 第 2 次對話（核心轉型）
- **主題**: 核心理解澄清與架構重新設計
- **討論內容摘要**:
  - 使用者澄清專案真實目的：EDM/廣告式 One Page 生成器
  - 確認架構：LLM 標籤生成 + 後端正則替換
  - 確認第一屏為設計重點
  - 確認封閉式範本選擇
  - 確認響應式策略和 SEO 需求
- **關鍵決策**:
  - 架構轉型（決策 #1）
  - 第一屏為重點（決策 #2）
  - 封閉式範本選擇（決策 #3）
  - 響應式策略（決策 #4）
  - SEO 為必要（決策 #5）
  - 影片處理策略（決策 #6）
- **新增資產**: 無
- **修改資產**: 所有資產庫需重新設計
- **下次目標**: 完成所有資產庫的重寫

### 2025-11-18 - 第 1 次對話（初步設計）
- **主題**: 流程初步設計與概念討論
- **討論內容摘要**:
  - 定義六階段流程
  - 討論資產庫概念
  - 討論 Figma 整合
  - 討論動態資產生成
- **下次目標**: 繼續深化流程細節
- **備註**: 本次對話的許多概念在第 2 次對話後被修正

---

## 🔄 待辦事項（優先級排序）

### 🔴 最高優先級（本次執行）
- [x] 更新 work_progress.md（本文件）
- [ ] 重寫 template_samples.md（標籤→HTML 映射格式）
  - 5 種 Hero 範本（重點）
  - 8 種內容區塊範本
- [ ] 重寫 color_schemes.md（6 種固定配色）
- [ ] 建立 layout_styles.md（3 種佈局風格）

### 🟡 高優先級（近期）
- [ ] 設計 generator-form.html（前端表單）
- [ ] 建立 LLM Prompt 範本文件
- [ ] 建立第一屏設計指南
- [ ] 建立 SEO 配置指南
- [ ] 設計替換引擎邏輯（正則表達式策略）

### 🟢 中優先級（後續）
- [ ] 建立完整的使用文件
- [ ] 建立範例頁面（展示 5 種 Hero 效果）
- [ ] 討論專案匯出功能
- [ ] 討論預覽功能

### 🔵 低優先級（未來）
- [ ] 建立 A/B 測試功能
- [ ] 建立分析追蹤碼整合
- [ ] 多語言支援

---

## ⚠️ 已知問題與風險

### 問題 #1: 正則表達式複雜度
- **描述**: 當範本變複雜時，正則替換可能難以處理
- **影響**: 可能需要更複雜的解析邏輯
- **計畫解決方案**:
  - 保持範本結構簡單
  - 考慮使用模板引擎（如 Handlebars）而非純正則
- **狀態**: 待評估

### 問題 #2: 使用者內容長度不可控
- **描述**: 使用者可能輸入過長的標題或文字，破壞版面
- **影響**: 響應式佈局可能跑版
- **計畫解決方案**:
  - 在表單中限制字元數
  - 在 CSS 中使用 `text-overflow: ellipsis`
  - 提供「文字長度建議」指南
- **狀態**: 待實作

### 問題 #3: SEO 元素的重複性
- **描述**: 每個頁面都需要手動填寫 SEO 資訊
- **影響**: 使用者體驗可能不佳
- **計畫解決方案**:
  - 提供「智能預填」功能（從標題自動生成描述）
  - 提供 SEO 範本
- **狀態**: 待討論

---

## 📦 固定範本清單

### Hero 範本（5 種）
1. `hero-centered` - 居中式（標題+副標題+CTA，背景圖/色）
2. `hero-split` - 分割式（左文右圖）
3. `hero-video` - 影片背景式（全螢幕影片+覆蓋文字）
4. `hero-minimal` - 極簡式（大留白+大標題）
5. `hero-form` - 表單式（Lead 收集用）

### 內容區塊範本（8 種）
1. `features-3col` - 三欄特色介紹
2. `features-2col` - 兩欄特色介紹
3. `testimonials` - 客戶見證（輪播）
4. `pricing` - 價格方案（卡片式）
5. `gallery` - 圖庫（Grid 佈局）
6. `video-embed` - 影片嵌入（YouTube/Vimeo）
7. `text-section` - 純文字段落
8. `cta-footer` - 底部行動呼籲

### 配色方案（6 種）
1. `vibrant-blue` - 活力藍（科技、專業）
2. `elegant-purple` - 優雅紫（創意、高端）
3. `warm-orange` - 溫暖橘（食品、生活）
4. `fresh-green` - 清新綠（健康、環保）
5. `professional-gray` - 專業灰（企業、金融）
6. `bold-red` - 大膽紅（促銷、緊迫）

### 佈局風格（3 種）
1. `modern` - 現代簡約（大留白、大字體）
2. `compact` - 緊湊充實（資訊密集、小間距）
3. `editorial` - 編輯風（類雜誌、不對稱）

**組合總數**: 5 × 8 × 6 × 3 = **720 種可能組合**

---

## 🎨 最終產出物清單

### 核心文件
- [ ] index.html（生成的頁面）
- [ ] generator-form.html（生成器表單）
- [ ] replace-engine.js 或 .py（替換引擎）

### 資產庫文件
- [ ] template_samples.md（範本庫）
- [ ] color_schemes.md（配色庫）
- [ ] layout_styles.md（佈局風格）

### 指南文件
- [ ] hero-design-guide.md（第一屏設計指南）
- [ ] seo-guide.md（SEO 配置指南）
- [ ] usage-guide.md（使用指南）

### 範例文件
- [ ] examples/（展示 5 種 Hero 效果的範例頁面）

---

## 📊 進度追蹤

### 階段一：需求定義
- [x] 確認專案定位（EDM/廣告頁生成器）
- [x] 確認核心架構（標籤替換）
- [x] 確認技術策略（響應式、SEO、影片處理）

### 階段 1.5：資產庫建立
- [ ] template_samples.md（進行中）
- [ ] color_schemes.md（進行中）
- [ ] layout_styles.md（待開始）

### 階段二：生成器介面
- [ ] generator-form.html（待開始）
- [ ] LLM Prompt 範本（待開始）

### 階段三：替換引擎
- [ ] 正則表達式設計（待開始）
- [ ] 引擎實作（待開始）

### 階段四：測試與優化
- [ ] 建立測試案例（待開始）
- [ ] 效能優化（待開始）

### 階段五：文件與範例
- [ ] 設計指南（待開始）
- [ ] 使用文件（待開始）
- [ ] 範例頁面（待開始）

---

## 🔮 下次對話目標
- 完成所有資產庫文件的重寫
- 開始設計前端表單
- 討論替換引擎的具體實作方式